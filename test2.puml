!includeurl https://raw.githubusercontent.com/ArmanAvanesyan/test/main/DFD.puml

!global $DEFAULT_FONT_COLOR ?= "#000000"
!global $ELEMENT_FONT_SIZE ?= 12
!global $DEFAULT_BORDER_COLOR ?= "blue"
!global $DEFAULT_BORDER_WIDTH ?= 2
!global $EXTERNAL_FILL_COLOR ?= "lightblue"
!global $PROCESS_FILL_COLOR ?= "white"
!global $ELEMENT_STYLE ?= "filled"

!function getTitle($title)
    !return $title
!endfunction

!unquoted procedure Title($title)
    graph [rankdir=LR ranksep=1.5 splines=true overlap=false labeljust=c labelloc=t fontname="Helvetica,Arial,sans-serif"\
    label=<<TABLE BORDER="0" CELLBORDER="0"> \
    <TR><TD><FONT COLOR="#000000" POINT-SIZE="16">$title</FONT></TD></TR> \
    <TR><TD><FONT COLOR="#000000" POINT-SIZE="10">"Context Diagram (DFD Level 0)"</FONT></TD></TR> \
    </TABLE>> ]
!endprocedure

!unquoted procedure startDfd($title)
digraph dfd2 {
    Title($title)
    node[shape=record]
!endprocedure

!procedure endDfd()
}
!endprocedure

' Elements

!unquoted procedure External($alias, $label, $fillcolor="", $style="", fontcolor="", fontsize="", color="", width="")
    $alias [label="$label" shape=box fillcolor=$EXTERNAL_FILL_COLOR style=$ELEMENT_STYLE fontcolor=$DEFAULT_FONT_COLOR  fontsize=$ELEMENT_FONT_SIZE color=$DEFAULT_BORDER_COLOR width=$DEFAULT_BORDER_WIDTH];
!endprocedure

!unquoted procedure Process($alias, $label, $fillcolor="", fontcolor="", fontsize="", color="", width="")
   $alias [label="0 | $label\n\n" shape=Mrecord fillcolor=$PROCESS_FILL_COLOR fontcolor=$DEFAULT_FONT_COLOR fontsize=$ELEMENT_FONT_SIZE color=$DEFAULT_BORDER_COLOR width=$DEFAULT_BORDER_WIDTH];
!endprocedure
