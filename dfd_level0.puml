' dfd_level0.puml
'------------------------------------------------------
' DFD Level 0 Library: Procedures for Processes, Data Stores,
' External Entities, Subgraph Blocks, and Data Flows
'------------------------------------------------------

!function getTitle($title)
    !return $title
!endfunction

!procedure Title($title)
    graph [rankdir=LR ranksep=1.5 splines=true overlap=false labeljust=c labelloc=t \
    label=<<TABLE BORDER="0" CELLBORDER="0"> \
    <TR><TD><FONT POINT-SIZE="16">$title</FONT></TD></TR> \
    <TR><TD><FONT POINT-SIZE="10">Context Diagram (DFD Level 0)</FONT></TD></TR> \
    <TR><TD><FONT POINT-SIZE="8">$notation Notation</FONT></TD></TR> \
    </TABLE>> ]
!endprocedure

' Open the digraph and define the default node shape
!procedure startDfd()
digraph dfd2 {
node[shape=record] 
!endprocedure

' Close the digraph
!procedure endDfd()
}
!endprocedure

'-------------------------------
' Node procedures
'-------------------------------

' External procedure for external entities
' Usage: External(alias, label)
!procedure External($alias, $label)
    $alias [label="$label", shape=box];
!endprocedure

' Process procedure with step number
' Usage: Process(alias, stepID, name)
!procedure Process($alias, $id, $name)
    $alias [label="{<f0> $id|<f1> $name\n}" shape=Mrecord];
!endprocedure

' Store procedure for data stores
' Usage: Store(alias, stepID, name)
!procedure Store($alias, $id, $name)
    $alias [label="<f0> $id   |<f1> $name"];
!endprocedure



'-------------------------------
' Data Flow macros
'-------------------------------

!procedure InFlow($alias1, $alias2, $label="")
    !if ($label != "")
        $alias1 -> $alias2 [label="$label"];
    !else
        $alias1 -> $alias2;
    !endif
!endprocedure
